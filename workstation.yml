- name: go-agent
- hosts: localhost
- become: true
- tasks:
    - name: Download go-agent repo file
      ansible.builtin.get_url:
          url: https://download.gocd.org/gocd.repo
          dest: /etc/yum.repos.d/gocd.repo

    - name: Install go-agent
      ansible.builtin.dnf:
          name: go-agent
          state: present

    - name: Install ansible
      ansible.builtin.dnf:
          name: ansible
          state: present

    - name: Install boto3 and botocore
      ansible.builtin.pip:
          name:
              - boto3
              - botocore

    - name: Enable and restart go-agent
      ansible.builtin.systemd_service:
          name: go-agent
          enable: true
          state: installed